
<p align="center">
    <img src="./logo.jpg" alt="Логотип проекта" width="150" style="display: inline-block; vertical-align: middle; margin-right: 10px;"/>  <br/>
     <H2 align="center">Команда Winstrike</H2> 
    <H2 align="center">Кейс №4 Департамент строительства города Москвы</H2> 
</p>

> Команда Winstrike  представляет инновационный программный модуль, основанный на передовых технологиях искусственного интеллекта. Этот модуль обладает способностью проводить анализ содержимого кузова самосвала, предназначенного для транспортировки отходов строительства и сноса. В результате автоматизированного процесса определения, наша разработка точно и надежно распознает тип перевозимых отходов


## Установка и запуск

**Наше решение разделено на две ключевые части. Первая часть включает в себя подробное руководство по развёртыванию без необходимости взаимодействия с интерфейсом, что обеспечивает быстрое и эффективное тестирование. Вторая часть предоставляет подробные инструкции по развертыванию решения с использованием интерфейса, обеспечивая при этом максимальную удобство и интуитивную навигацию.**

***Часть 1:***
----------

*1. Загрузите папку "1 часть" и откройте её в вашей предпочитаемой среде разработки (IDE).* 

*2. Откройте терминал в IDE и введите туда следующую команду:* 

```python
python -m venv .venv
```
*3. Дождитесь создание папки `.venv` затем введите следующую команду:*

```python
.\.venv\Scripts\activate
```
*4. После активации установите все библиотеки (весрия python==3.10+) при помощи данной команды:*

```python
pip install -r requirements.txt
```
*5. Дождитесь установки всех библиотек, поместите тестовые видео в папку `test`.*

*6. Запустите скрипт детекции введя команду, изменив путь до папки `test` из примера на свой ```Внимание!!!``` путь должен быть обсолютным, помещен в двойные ковычки, должны быть двойные \\\\ .*

```python
python.exe .\detect.py "C:\hack\\test_musor\\test"
```
*7. После выполнения скрипта появится файл с информацией о типе распознаного мусора в загруженных видео. Также в папке `photos` появятся изображения с распознанным мусором.*

***Часть 2:***
----------

### Backend
Для запуска API и алгоритма обработки видео нейросетью требуется:

*1. Установить требуемые библиотеки.*

```python
pip install -r requirements.txt
```

*2. Установить PostgreSQL с оффициального сайта.*

*3. Указать данные для подключения к базе данных в файле `config.py`*

*4. Запустить проект. Запуск производится запуском файла `main.py`* 

При загрузке видео на сервер посредством API, оно сохраняется в папку `static/`, там же хранятся фотографии результатов обработки видео.

При параллельной обработке загруженных видео, рекомендуется выставлять количество потоков для обработки исходя из мощностей устройства, изменяя данную строку в файле `main.py`.
```python
executor = ThreadPoolExecutor(max_workers=5)  # Укажите количество желаемых потоков для обработки видео
```

### Frontend
Для запуска приложения требуется:

*1. Установить требуемые библиотеки.*

```cmd
npm install
```

или

```cmd
yarn install
```

*2. Запустить проект.* 

```cmd
npm run start
```
*3. Путь до API сервера указывается в файле `frontend/src/confog.js` .*

### Docker
Для запуска данного проекта в среде Docker требуется:

*1. Установить Docker Desktop с оффициального сайта.*

*2.1. Для запуска всего приложения в папке `Winstrike-trash-analyzer-module/'Часть 2'/` требуется выполнить следующую команду:*

```cmd
docker-compose up
```

После установки всех библиотек и зависимостей будет созданно 3 docker контейнера:
- _frontend_ - с сайтом проекта на порту 3000
- _backend_ - с API и нейросетью проекта на порту 5000
- _database_ - база данных PostgreSQL для сохранения результатов анализа на порту 5432

*2.2. Для запуска только frontend части проекта в папке `Winstrike-trash-analyzer-module/'Часть 2'/frontend/` требуется выполнить следующую команду:*

```cmd
docker-compose up
```

После установки всех библиотек и зависимостей будет создан 1 docker контейнер:
- _frontend_ - с сайтом проекта

*2.3. Для запуска только backend части проекта в папке `Winstrike-trash-analyzer-module/'Часть 2'/backend/` требуется выполнить следующую команду:*

```cmd
docker-compose up
```

После установки всех библиотек и зависимостей будет создано 2 docker контейнера:
- _backend_ - с API и нейросетью проекта
- _database_ - база данных PostgreSQL для сохранения результатов анализа

# Пример использования, иллюстрированный процессом обработки скринкаста.

https://github.com/Fresh-vano/Winstrike-trash-analyzer-module/assets/74467916/924931f4-1f23-4b2f-93ab-8aabc93acf84


*Ознакомиться с видео в хорошем качестве можете перейдя по ссылке* https://drive.google.com/file/d/16N1zIyLxKfyr48mjGRydFpd19LnZkopZ/view?usp=sharing

*на google disk или открыть ссылку указаную нами ссылку на сайте цифрового прорыва.*

# Пример обработанного видео

https://github.com/Fresh-vano/Winstrike-trash-analyzer-module/assets/74467916/af6cb1a3-1596-424f-af5e-d549fb87f922




Все права защищены. &copy; Winstrike.
